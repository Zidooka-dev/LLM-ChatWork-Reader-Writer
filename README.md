# LLM-ChatWork-Reader/Writer

> âš  This project is currently under active development (WIP).
> API surface and behavior may change.

LLM-friendly ChatWork CLI for reading and writing room messages.

## Why this package

- Reader and Writer commands are separated (`read` / `write`)
- JSON and JSONL output for LLM pipelines
- Message input from argument, file, or stdin
- Works with official ChatWork API v2

## Requirements

- Node.js 18+ (uses built-in `fetch`)
- ChatWork API token

## Setup

1. Set token in environment:

```powershell
$env:CHATWORK_API_TOKEN = "YOUR_TOKEN"
```

2. Run from this directory:

```powershell
cd cli/LLM-ChatWork-Reader-Writer
node src/cli.mjs --help
```

Optional (bin command):

```powershell
npm link
llm-chatwork-rw --help
```

## Commands

### Account

```powershell
node src/cli.mjs me
```

### Rooms

```powershell
node src/cli.mjs rooms
node src/cli.mjs rooms --contains support --json
```

### Read messages

```powershell
node src/cli.mjs read --room 123456
node src/cli.mjs read --room 123456 --limit 50 --since 2026-02-01 --json
node src/cli.mjs read --room 123456 --jsonl --strip-tags
```

### Write messages

```powershell
node src/cli.mjs write --room 123456 --message "Daily report done."
node src/cli.mjs write --room 123456 --file ./message.txt --to 111,222
"Generated by LLM" | node src/cli.mjs write --room 123456
```

Reply format support:

```powershell
node src/cli.mjs write --room 123456 --message "Thanks." --reply-account 111 --reply-message 999999
```

## Token options

Token resolution order:

1. `--token`
2. `CHATWORK_API_TOKEN`
3. `CHATWORK_TOKEN`
4. `--env-file` values (`CHATWORK_API_TOKEN`, `CHATWORK_TOKEN`)

## API endpoints used

- `GET /v2/me`
- `GET /v2/rooms`
- `GET /v2/rooms/{room_id}/messages?force=1`
- `POST /v2/rooms/{room_id}/messages`
